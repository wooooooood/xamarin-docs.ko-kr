---
title: SiriKit 개념 이해하기
description: 이 문서에서는 Xamarin.ios 앱에서 SiriKit로 작업 하는 데 필요한 주요 개념에 대해 설명 합니다. 예를 들어, 의도 및 의도 UI 확장, SiriKit 권한, 훌륭한 경험 디자인 등에 대해 설명 합니다.
ms.prod: xamarin
ms.assetid: 99EC5C1E-484F-4371-8555-58C9F60DE37F
ms.technology: xamarin-ios
author: lobrien
ms.author: laobri
ms.date: 05/02/2017
ms.openlocfilehash: bce2c1e543084ea80908946b1e37e43cf53c1676
ms.sourcegitcommit: c9651cad80c2865bc628349d30e82721c01ddb4a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 09/03/2019
ms.locfileid: "70227353"
---
# <a name="understanding-sirikit-concepts"></a>SiriKit 개념 이해하기

_이 문서에서는 Xamarin.ios 앱에서 SiriKit를 사용 하는 데 필요한 핵심 개념을 설명 합니다._


IOS 10의 새로운 기능으로 SiriKit를 사용 하면 Xamarin.ios 앱에서 Siri를 사용 하는 사용자에 게 액세스 가능한 서비스와 iOS 장치에서 맵 앱을 제공할 수 있습니다. 이 기능은 새 **의도** 및 **의도 UI** 프레임 워크를 사용 하 여 하나 이상의 앱 확장에서 제공 됩니다.

SiriKit를 사용 하면 iOS 앱이 앱 확장 및 새 **의도** 및 **의도 UI** 프레임 워크를 사용 하 여 ios 장치의 siri 및 Maps 앱을 사용 하 여 사용자가 액세스할 수 있는 서비스를 제공할 수 있습니다.

Siri는 **도메인**개념과 관련 태스크에 대 한 알고 있는 작업 그룹을 사용 하 여 작동 합니다. 앱에서 Siri를 사용 하는 각 상호 작용은 다음과 같이 알려진 서비스 도메인 중 하나에 속해야 합니다.

- 오디오나 비디오를 호출 합니다.
- 을 예약 합니다.
- 워크를 관리 합니다.
- 전송.
- 사진을 검색 하 고 있습니다.
- 지불 보내기 또는 받기.

사용자가 앱 확장의 서비스 중 하나를 포함 하는 Siri를 요청 하면 SiriKit에서 해당 확장을 지원 데이터와 함께 사용자의 요청을 설명 하는 **의도** 개체에 보냅니다. 그러면 앱 확장이 지정 된 **의도**에 대 한 적절 한 **응답** 개체를 생성 하 여 확장에서 요청을 처리할 수 있는 방법을 자세히 설명 합니다.

## <a name="the-intents-and-intents-ui-extensions"></a>의도 및 의도 UI 확장

Siri와 Maps 앱은 두 가지 유형의 앱 확장을 통해 앱의 서비스와 상호 작용 합니다.

- 인 텐트 **확장** -siri를 제공 하 고 앱의 콘텐츠와 매핑하고 지원 되는 의도를 충족 하는 데 필요한 작업을 수행 합니다.
- 인 텐트 **Ui 확장** -siri 또는 맵 내에서 앱 콘텐츠에 대해 표시 되는 사용자 지정 ui를 제공 합니다.

앱은 SiriKit를 지원 하기 위해 의도 확장을 제공 해야 하며 Siri 및 Maps가 사용자에 게 제공 하 고 의도를 처리 하는 데 사용할 수 있는 정보를 제공 해야 합니다.

Siri는 일반적으로 모든 사용자 상호 작용을 처리 하 고 지원 되는 각 도메인에 정보를 제공 하기 위한 표준 기본 UI를 제공 하므로 의도 UI 확장을 만드는 것은 선택 사항입니다. 의도 ui 확장을 제공 하 여 앱은 **의도 ui** 프레임 워크를 사용 하 여 앱의 브랜딩 및 추가 정보를 제공 하는 풍부한 사용자 지정 사용자 인터페이스를 제공할 수 있습니다.

## <a name="siri-and-the-maps-app-role"></a>Siri 및 Maps 앱 역할

사용자의 음성 요청은 언어를 처리 하 고 Siri에 의해 의미 체계가 분석 됩니다. 이러한 요청은 의도 확장이 처리할 수 있는 실행 가능한 의도로 전환 됩니다.

Maps는 앱의 의도 확장을 사용 하 여 사용자의 작업에 대 한 응답으로 맵 인터페이스에 정보를 표시 합니다. 예를 들어 근처 식당에 요청 하거나 앱의 식당 리뷰를 받고 있습니다.

Siri와 지도 모두 표준 시스템 인터페이스를 사용 하 여 모든 사용자의 상호 작용을 관리 하 고 결과를 표시 합니다. 앱 확장 역할은 주로 표시 되는 데이터를 제공 합니다. 필요에 따라 앱은 의도 UI 확장을 제공 하 고 사용자 지정 UI를 제공 하 여 기본 시스템 인터페이스를 향상 시킬 수 있습니다.

## <a name="interacting-with-siri-via-sirikit"></a>SiriKit를 통해 Siri와 상호 작용

이 섹션에서는 SiriKit에서 Siri를 사용 하 여 앱과 상호 작용할 수 있도록 하는 방법에 대 한 개요를 제공 합니다. 이 예제에서는 다음과 같이 가짜 MonkeyChat 앱을 사용 합니다.

[![](understanding-sirikit-images/monkeychat01.png "MonkeyChat 아이콘")](understanding-sirikit-images/monkeychat01.png#lightbox)

MonkeyChat는 각각 화면 이름 (예: Bobo)과 연결 된 사용자의 친구에 대 한 고유한 연락처 설명서를 유지 하 고 사용자가 화면 이름으로 각 친구에 게 텍스트 채팅을 보낼 수 있도록 합니다.

사용자가 앱과의 상호 작용을 시작할 수 있는 여러 가지 방법이 있습니다. 다른 사용자는 다양 한 형식으로 동일한 요청을 수행할 수 있기 때문입니다.

예를 들어 사용자가 friend Bobo에 메시지를 보내려고 하는 경우 Siri를 사용 하 여 다음과 같은 대화를 했을 수 있습니다.

_정의 여기서는 MonkeyChat 메시지를 보냅니다._<br />
_Siri 누구 인가요?_<br />
_정의 Bobo._<br />
_Siri Bobo 무엇을 하 고 싶으세요?_<br />
_정의 더 많은 Bananas을 보내 주세요._<br />

다른 사용자가 다른 대화를 사용 하 여 동일한 요청을 수행할 수 있습니다.

_정의 MonkeyChat의 Bobo에 메시지를 보냅니다._<br />
_Siri Bobo 무엇을 하 고 싶으세요?_<br />
_정의 더 많은 bananas을 보내 주세요._<br />

그리고 다른 사용자가 훨씬 더 짧은 요청을 수행할 수 있습니다.

_정의 MonkeyChat Bobo 더 많은 bananas을 보내 주세요._<br />
_Siri 확인, 메시지 보내기 bananas에서 Bobo에 더 많은 추가 정보를 보냅니다._<br />

또는 동일한 요청을 다른 언어로 만들 수도 있습니다.

_정의 MonkeyChat Bobo의 il vous plaît envoyer plus de bananes._<br />
_Siri Ouenvoi 메시지, vous, plaît envoyer plus de bananes à Bobo 성 Monkeychat._<br />

그러나 다른 사용자는 대화에서 매우 자세한 정보를 받을 수 있습니다.

_정의 안녕하세요 .이를 선호 하 고 MonkeyChat 앱을 시작 하 여 메시지가 포함 된 텍스트를 보낼 수 있습니다. 더 많은 bananas을 보내 주세요._<br />
_Siri 누구 인가요?_<br />
_정의 내 최고의 pal Bobo._<br />

또한 다음과 같은 여러 가지 방법으로 Siri에서 요청에 응답할 수 있습니다.

- **홈 단추를 누르고 있으면** -siri는 제한 된 구두 피드백을 통해 더 많은 시각적 응답을 제공 합니다.
- **"안녕하세요 siri"** -siri는 더 많은 정보를 제공 하 고 더 작은 시각적 응답을 제공 합니다.

Siri는 사용자의 접근성 요구를 충족 하도록 조정 되며, 이러한 요구 사항에 따라 상호 작용 하 고 대응 합니다.

요청을 수행 하는 방법 또는 Siri가 요청에 응답 하는 방법에 관계 없이 Siri는 사용자 및 앱 (확장을 통해)을 사용 하 여 대화를 처리 하 고 기능을 제공 합니다.

사용자가 Siri에 대 한 구두 요청을 수행할 때 Siri가 따라야 하는 단계는 다음과 같습니다.

[![](understanding-sirikit-images/monkeychat02.png "Siri가 따라야 하는 단계")](understanding-sirikit-images/monkeychat02.png#lightbox)

1. 먼저 Siri는 사용자의 **음성** 오디오를 사용 하 고 텍스트로 변환 합니다.
2. 그런 다음 텍스트는 사용자의 요청에대 한 구조화 된 표현으로 변환 됩니다.
3. 의도에 따라 Siri는 사용자의 요청을 수행 하는 **작업** 을 수행 합니다.
4. 마지막으로 Siri는 수행 된 동작에 따라 사용자에 게 **응답** (시각적 개체 및 구두)을 제공 합니다.

앱이 Siri를 사용 하 여 사용자의 대화에 참여 하는 세 가지 주요 방법이 있습니다.

[![](understanding-sirikit-images/monkeychat03.png "앱이 Siri를 사용 하 여 사용자 대화에 참여 시킬 수 있는 세 가지 주요 방법")](understanding-sirikit-images/monkeychat03.png#lightbox)

1. **어휘** -앱에서 siri에 게 상호 작용 하는 데 필요한 단어를 알리는 방법입니다.
2. **앱 논리** -지정 된 의도에 따라 앱에서 수행할 작업 및 응답입니다.
3. **사용자 인터페이스** -앱에서 응답을 제공할 수 있는 선택적 사용자 지정 사용자 인터페이스입니다.

### <a name="example"></a>예제

위의 정보를 고려 하 여 다음 대화가 MonkeyChat 앱과 상호 작용 하는 방법을 살펴봅니다.

_정의 Bobo에서 MonkeyChat의 메시지를 전송 합니다._<br />
_Siri Bobo 무엇을 하 고 싶으세요?_<br />
_정의 더 많은 bananas을 보내 주세요._<br />

앱이 대화에 사용 하는 첫 번째 역할은 Siri가 사용자의 음성을 이해 하는 데 도움을 주는 것입니다.

[![](understanding-sirikit-images/monkeychat04.png "Siri의 사용자 음성 이해 지원")](understanding-sirikit-images/monkeychat04.png#lightbox)

Siri의 데이터베이스에는 "Bobo" 라는 이름이 없지만 앱은 어휘를 통해이 정보를 Siri와 공유 합니다. 또한이 앱은 Siri를 *연락처로*지정 했으므로 siri가 받는 Bobo를 인식 하는 데 도움이 됩니다.

Siri는 받는 사람에 게 메시지를 전송 하는 데 더 많은 작업이 필요 하다는 것을 알고 있으므로 응용 프로그램 확장으로 신속 하 게 확인 하 여 메시지가 콘텐츠를 필요로 하는지 확인 합니다. MonkeyChat가 수행 하므로 Siri는 다음과 같은 질문을 통해 사용자에 게 응답 합니다. *"원하는 항목을 Bobo?"*

위의 예제에서 사용자는 *"더 많은 bananas을 보내 주세요."* 라는 응답을 받았습니다.

[![](understanding-sirikit-images/monkeychat05.png "Siri는 사용자의 응답을 구조적 의도에 번들 합니다.")](understanding-sirikit-images/monkeychat05.png#lightbox)

구조적 의도에는 다음 정보가 포함 됩니다.

- **도메인** 메시지
- **의도:** sendMessage
- **수신자** Bobo
- **콘텐츠:** 더 많은 bananas를 전송 하세요.

모든 도메인은 도메인 및 작업을 기반으로 하 여 수행할 수 있는 알고 있는 *작업* 집합을 가집니다. 앱에 전송 되는 의도에는 0 개 이상의 매개 변수가 포함 될 수 있습니다.

그런 다음 처리를 위해 의도를 앱 확장으로 보냅니다. 의도를 처리 한 결과로 앱은 의도와 함께 제공 되는 응용 프로그램의 용도를 설명 하는 매개 변수와 함께 제공 되는 **Intentresponse** 를 생성 합니다.

각 IntentResponse에는 앱에서 요청을 완료할 수 있는 경우 Siri에 게 알리는 **응답 코드도** 포함 됩니다. 일부 도메인에는 전송할 수 있는 매우 구체적인 오류 응답 코드도 있습니다.

마지막으로, intentresponse에는을 `NSUserActivity` (를) 지 원하는 데 사용 되는 것과 같은가 포함 됩니다. 는 `NSUserActivity` 응답에서 siri 환경을 종료 하 고 앱을 입력 하 여 완료 해야 하는 경우 앱을 시작 하는 데 사용 됩니다.

Siri는 응용 프로그램을 시작 `NSUserActivity` 하는 적절 한을 자동으로 빌드하고 siri 환경에서 사용자가 남겨진 위치를 픽업 합니다. 그러나 필요한 경우 앱에서 사용자 지정 `NSUserActivity` 된 정보를 제공 합니다.

앱이 의도를 처리 하 고 Siri에 대 한 응답을 반환한 후에는 결과를 사용자에 게 표시 합니다 (구두로 및 시각적으로).

[![](understanding-sirikit-images/monkeychat06.png "사용자에 게 구두로 및 시각적으로 표시 되는 결과")](understanding-sirikit-images/monkeychat06.png#lightbox)

Siri에는 앱에서 사용할 수 있는 각 도메인에 대 한 몇 가지 기본 제공 응답 사용자 인터페이스가 있습니다. 그러나 MonkeyChat는 선택적인 의도 UI 확장을 제공 했으므로 위의 예제에서 사용자에 게 대화의 결과를 표시 하는 데 사용 됩니다.

## <a name="the-intent-lifecycle"></a>의도 수명 주기

의도를 처리할 때 앱 확장이 수행 해야 하는 세 가지 주요 작업은 다음과 같습니다.

[![](understanding-sirikit-images/monkeychat07.png "의도 수명 주기")](understanding-sirikit-images/monkeychat07.png#lightbox)

1. 앱은 이벤트의 모든 매개 변수를 **확인** 해야 합니다. 따라서 앱은 각 매개 변수 마다 한 번씩 확인을 여러 번 호출 하 고, 앱과 사용자가 요청 된 항목에 동의할 때까지 동일한 매개 변수에 여러 번 여러 번 호출 합니다.
2. 앱은 요청 된 의도를 처리할 수 있는지 **확인** 하 고, 예상 된 결과에 대해 siri에 게 알려 주어 야 합니다.
3. 마지막으로 앱은 의도를 **처리** 하 고 요청 된 결과를 얻기 위해 단계를 수행 해야 합니다.

### <a name="the-resolve-stage"></a>확인 단계

확인 단계는 Siri가 사용자가 제공한 값을 이해 하 고 사용자가 의도 한 것이 앱에서 처리 될 때 어떤 일이 발생 하는지 확인 하는 데 도움이 됩니다.

또한이 단계는 앱이 사용자와 대화 하는 동안 Siri의 동작에 영향을 줄 수 있는 기회를 제공 합니다. 이렇게 하려면 앱에서 **확인 응답**을 제공 합니다. Siri가 이해 하는 다양 한 유형의 데이터에 대 한 미리 정의 된 응답은 여러 가지가 있습니다.

앱에서 가장 일반적인 확인 응답은 **성공**합니다. 즉, 앱이 매개 변수 (예: 사용자 화면 이름)의 특정 데이터 부분에 대해 알고 있는 정보를 일치 시킵니다.

앱에서 지정 된 요청이 알려진 올바른 정보 부분과 일치 하는지 확인 해야 하는 경우가 있을 수 있습니다. 이러한 경우에는 사용자에 게 *"메시지 보내기 Bobo"* 와 같은 예 또는 아니요의 질문을 **ConfirmationRequired** 응답을 보냅니다.

앱에서 사용자가 간단한 옵션 목록에서 선택 해야 하는 경우도 있습니다. 이 경우 앱은 사용자가 선택할 수 있도록 두 개에서 10 개 사이의 옵션 목록이 포함 된 **명확성** 응답을 제공 합니다.

```csharp
Who do you want to message?

* Bobo the Great
* Bobo Jr.
* Little Bobo
```

Siri는 구두로 또는 Siri UI와 상호 작용 하 여 선택 하는 사용자를 처리 하 고 결과는 앱으로 다시 전송 됩니다.

다른 경우에는 응용 프로그램에서 매개 변수를 확인 하는 데 충분 한 정보가 없거나 명확성을 사용 하 여 확인할 수 있는 일치 항목이 너무 많은 것일 수 있습니다 (예: 이름에 Bobo가 있는 80 사용자). 이 경우 앱은 **NeedsMoreDetails** 응답을 보내고 siri는 사용자에 게 보다 구체적인 정보를 표시 합니다.

사용자가 의도를 처리 하는 데 필요한 값을 제공 하지 않은 경우 **NeedsValue** 응답을 보내 siri에 게 사용자에 게 값을 입력 하 라는 메시지를 표시할 수 있습니다.

앱이 사용자가 특정 매개 변수에 대해 제공한 값을 지원 하지 않는 경우에는 **Unsupportedwithreason** 응답을 보내 값이 지원 되지 않는 이유를 제공할 수 있습니다. 그러면 siri가 완전히 새로운 값을 묻는 메시지를 표시 하 고 필요한 이유를 지정 합니다.

마지막으로 **Notrequired** 응답을 사용 하 여 응용 프로그램에 지정 된 매개 변수 값이 필요 하지 않도록 siri에 게 알립니다. 사용자가 하나를 제공 하는 경우 Siri에서 무시 됩니다.

### <a name="the-confirm-stage"></a>확인 단계

확인 단계는 다음 두 가지 용도로 사용 됩니다.

- Siri가 사용자에 게 발생 하는 결과를 알릴 수 있도록 의도를 처리 하는 데 예상 되는 결과를 제공 합니다.
- 요청 된 결제를 위해 은행에 충분 한 비용을 확보 하는 것과 같이 앱이 사용자가 제시한 요청을 완료 해야 할 수 있는 기회를 확인 하는 기회를 제공 합니다.

앱은 확인 단계에서 **의도 응답** 을 제공 하므로 siri가 사용자와 효율적으로 통신할 수 있도록 앱에서 사용할 수 있는 정보로 채워야 합니다.

도메인 및 작업 유형에 따라 Siri는 지불을 보내거나를 예약 하기 전에와 같이 사용자에 게 확인 메시지를 표시할 수 있습니다.

### <a name="the-handle-stage"></a>핸들 단계

핸들 단계는 응용 프로그램이 수행 해야 하는 작업을 수행 하 여 사용자의 요청을 처리 하는 지점 이므로 의도를 사용 하 여 작업 하는 데 가장 중요 한 부분입니다.

확인 단계에서와 마찬가지로 앱은 가능한 한 결과에 대해 많은 정보를 제공 해야 합니다. 그러면 Siri가이를 사용자에 게 연결할 수 있습니다. 이러한 정보가 시각적으로 표시 되거나 Siri가 사용자에 게 다시 말하는 경우

응용 프로그램에서 네트워크 호출 지연과 같은 지정 된 요청을 처리 하기 위해 추가 시간이 필요할 수 있으며, 주문을 완료 하 고 배송 하거나 사용자의 위치에 대 한 자동차를 구동 하는 등의 작업을 수행 해야 하는 경우가 있을 수 있습니다. Siri가 앱에서 응답을 다시 기다리는 경우 앱에서 요청을 처리 하 고 있음을 알리는 대기 UI를 사용자에 게 표시 합니다.

이상적으로 앱은 2 ~ 3 초 이내에 Siri에 대 한 응답을 제공 해야 합니다. 앱에서 지정 된 응답이 처리 되는 데 더 오래 걸릴 것으로 알고 있는 경우에는 Siri에 게 **InProgress** 응답 코드를 전송 해야 합니다. 그런 다음 siri는 앱이 백그라운드에서 요청을 처리 하 고 있으며 Siri 환경을 떠나는 경우에도 계속 해 서 사용자에 게이를 알립니다.

## <a name="adding-sirikit-to-the-app"></a>앱에 SiriKit 추가

IOS 10에서 SiriKit를 사용 하 여 Apple은 다음과 같은 두 개의 새 확장 요소를 만들었습니다.

- 인 텐트 **확장** -siri에 앱의 콘텐츠를 제공 하 고 지원 되는 의도를 충족 하는 데 필요한 작업을 수행 합니다.
- 인 텐트 **Ui 확장** -siri 내부의 앱 콘텐츠에 대해 표시 되는 사용자 지정 ui를 제공 합니다.

또한 형식에서 인식을 지원 하기 위해 Siri에 단어와 구를 제공 하는 API가 있습니다.

- **앱 어휘** -앱의 모든 사용자에 게 공통적으로 사용 되는 단어와 구입니다.
- **사용자 어휘** -지정 된 앱 사용자에 게 고유한 단어 및 문구입니다.

## <a name="the-intents-extension"></a>의도 확장

의도 확장은 다음과 같이 앱과 Siri 간의 주요 상호 작용을 처리 하는 일을 담당 합니다.

[![](understanding-sirikit-images/intents01.png "의도 확장")](understanding-sirikit-images/intents01.png#lightbox)

의도 확장은 하나 이상의 의도를 지원할 수 있으며, 개발자는 앱에서 SiriKit를 구현할 방법을 결정 합니다. 개발자는 처리 해야 할 각 의도에 대 한 별도의 의도 확장을 추가할 수도 있습니다.  즉, Apple은 Siri가 앱에 대해 열린 여러 프로세스를 포함 하지 않도록 의도 확장 수를 제한 하도록 요청 합니다 .이 경우 처리 하는 데 더 많은 메모리와 시간이 필요 합니다.

또한 개발자는 Siri가 활성화 되어 있는 동안 의도 확장이 백그라운드에서 실행 됨을 인식 해야 합니다. 그러면 Siri가 해당 요청에 대 한 정보를 처리 하기 위해 확장과 계속 통신 하면서 사용자와 대화를 적극적으로 수행할 수 있습니다.

## <a name="privacy-and-security-considerations"></a>개인 정보 및 보안 고려 사항

Apple은 Siri로 작업할 때 사용자 개인 정보를 안전 하 게 보호 하기 위해 많은 조치를 취하 며, 사용자가 iOS 장치에서 로그인 해야 하는 여러 상호 작용이 있습니다. 예를 들어,를 요청 하거나 지불 하는 경우입니다.

또한 앱에서 장치에 로그인 하는 사용자에 게 제한 하려는 특정 동작이 있습니다. 이러한 상황에서 앱은 **잠긴 동안 제한** 동작을 요청할 수 있습니다. 이는 `Info.plist` 파일의 설정을 통해 수행 됩니다.

로컬 인증 프레임 워크는 의도 확장에 사용할 수 있으므로, 장치가 이미 잠금 해제 되어 있는 경우에도 앱에서 사용자에 게 추가 인증 정보를 요청할 수 있습니다.

마지막으로 Apple Pay는 의도 확장에 사용할 수 있으므로 앱이 Apple Pay를 사용 하 여 트랜잭션을 완료할 수 있으며 기본 제공 Apple Pay 시트가 Siri 인터페이스 위에 표시 됩니다.

또한 Apple은 사용자가 타사 앱에 정보를 전송 하는 경우 사용자에 게 알려줍니다. 요청을 수행할 때 사용자가 앱의 번들 표시 이름에 지정 된 대로 앱의 특정 이름을 지정 **해야** 합니다.

Apple은 사용자와 자연스럽 게 자연 스런 대화를 수행 하기 위해 Siri를 설계 했으며,이로 인해 앱의 번들 이름을 대부분의 음성 부분에서 사용할 수 있습니다. 언제 든 지 사용자 요청에 자연스럽 게 적합 합니다.

사용자가 수행 해야 하는 일반적인 작업 중 하나는 앱 이름을 "verbify" 하는 것입니다. 즉, 앱 이름을 가져와 요청에서 동사로 사용 합니다. 예를 들어 *"Monkeychat Bobo는 훌륭한 bananas."*

## <a name="the-intents-ui-extension"></a>인 텐트 UI 확장

인 텐트 UI 확장은 응용 프로그램의 UI 및 브랜딩을 Siri 환경으로 전환 하 고 사용자가 앱에 연결 되도록 하는 기회를 제공 합니다. 이 확장을 사용 하 여 앱은 브랜드 뿐만 아니라 시각적 개체 및 기타 정보를 성적 증명서에 가져올 수 있습니다.

[![](understanding-sirikit-images/intents02.png "예제 의도 UI 확장 출력")](understanding-sirikit-images/intents02.png#lightbox)

인 텐트 UI 확장은 항상를 `UIViewController` 반환 하며, 앱은 초기 응답을 초과 하는 추가 정보를 표시 하는 것과 같이 뷰 컨트롤러 내에서 선호 하는 모든 항목을 추가할 수 있습니다. 또한 의도 UI는 긴 실행 이벤트의 상태를 사용 하 여 사용자를 업데이트할 수 있습니다. 예를 들어, 사용자가 해당 위치에 도달 하는 데 사용 하는 것이 얼마나 길 수 있습니다.

인 텐트 UI 확장은 항상 UI의 맨 위에 있는 앱 아이콘 및 이름과 같은 다른 Siri 콘텐츠와 함께 표시 되거나 의도에 따라 단추 (예: 보내기 또는 취소)가 아래쪽에 표시 될 수 있습니다.

앱이 기본 환경을 앱에 맞게 조정 된 상태로 바꿀 수 있는 메시징 또는 맵과 같이 기본적으로 Siri가 사용자에 게 표시 하는 정보를 사용자에 게 교체할 수 있는 몇 가지 인스턴스가 있습니다.

> [!IMPORTANT]
> 또는 `UIButtons` `UIViewController`와 같은 대화형 요소를 의도 ui 확장에 추가할 수 있지만 비 대화형으로는 의도 ui로 엄격히 사용할 수 없으며 사용자는 상호 작용할 수 없습니다. `UITextFields`

Siri는 각 의도 유형에 대 한 기본 UI 집합을 포함 하기 때문에 앱에서 의도 UI 확장을 제공 하는 것은 전적으로 선택 사항입니다. 또한 의도 UI 인터페이스는 Apple에서 사용자에 게 유용한 특정 의도에 대해서만 사용할 수 있습니다.

## <a name="adding-sirikit-vocabulary"></a>SiriKit 어휘 추가

SiriKit를 구현 하는 마지막 부분은 필요한 어휘를 제공 하 여 앱 내에 있습니다. 많은 앱에는 사용자에 게 정보를 설명 하는 고유한 방법과 사용자가 앱에 정보를 제공 하는 고유한 방법이 있습니다.

이로 인해 Siri는 앱에 고유한 단어와 구를 이해 하기 위해 앱의 지원이 필요 합니다. 이러한 구의 일부는 모든 사용자가 인식 하 고 이해할 수 있도록 앱의 일부가 됩니다. 그러나 앱의 지정 된 사용자에 게는 다른 사용자가 고유 합니다.

### <a name="app-specific-vocabulary"></a>앱 특정 어휘

앱 특정 어휘는 차량 유형 또는 체력 단련 이름과 같은 모든 앱 사용자에 게 알려진 특정 단어 및 구를 정의 합니다. 이러한 `AppIntentVocabulary.plist` 파일은 응용 프로그램의 일부 이기 때문에 주 앱 번들의 일부로 파일에 정의 됩니다. 또한 이러한 단어와 구를 지역화 해야 합니다.

어휘 `AppIntentVocabulary.plist` 파일에는 다음과 같은 여러 부분이 있습니다.

- **예제 앱 사용** -사용자가 앱을 만들 수 있는 요청에 대 한 일반적인 사용 사례 집합을 제공 합니다. 예를 들어: *"MonkeyFit를 사용 하 여 체력을 시작 합니다."*
- **Parameters** -앱과 관련 된 비표준 매개 변수 형식의 집합을 제공 합니다. 예를 들어 MonkeyFit 앱에 대 한 체력 단련 이름입니다. 다음으로 구성 됩니다.
  - **문구** -앱에서 앱에 대 한 고유한 용어를 정의할 수 있습니다. 예: MonkeyFit 앱에 대 한 "Bananarific" 체력 단련 유형입니다.
  - **발음** -지정 된 구에 대 한 간단한 윗주로 siri에 대 한 발음 힌트를 제공 합니다. 예를 들면 "ba nana ri f)"입니다.
  - **예제** -앱에서 지정 된 구를 사용 하는 예제를 제공 합니다. 예를 들어 *"Bananarific를 MonkeyFit로 시작"* 합니다.

자세한 내용은 Apple의 [앱 어휘 파일 형식 참조](https://developer.apple.com/library/prerelease/content/documentation/Intents/Conceptual/SiriIntegrationGuide/CustomVocabularyKeys.html#//apple_ref/doc/uid/TP40016875-CH10-SW1)를 참조 하세요.

### <a name="user-specific-vocabulary"></a>사용자 전용 어휘

사용자 특정 어휘는 앱의 개별 사용자에 게 고유한 단어나 구를 제공 합니다. 이러한 항목은 목록 시작 부분에서 가장 중요 한 용어를 사용 하 여 사용자에 대 한 가장 중요 한 사용 우선 순위에 따라 정렬 된 용어 집합으로 주 앱 (앱 확장이 아님)에서 런타임에 제공 됩니다.

위에 제시 된 MonkeyChat 앱의 예를 살펴보세요. MonkeyChat는 사용자의 특정 어휘를 통해 Siri로 전송 되는 모든 사용자의 연락처 목록을 보관 합니다. 또한 사용자가 메시지 하 고 각 사용자에 대해 즐겨 찾는 연락처 집합을 보유 하 고 있는 10 개의 최근 연락처 목록을 보관 합니다. 이 예에서는 즐겨 찾는 연락처가 사용자의 특정 어휘 시작 부분에 오고 그 뒤에 사용자 연락처의 최근 연락처가 있어야 합니다.

사용자 특정 어휘에서 지원 되는 정보 유형은 다음과 같습니다.

- 연락처 이름입니다.
- 단련 이름.
- 사진 앨범 이름입니다.
- 사진 키워드.

앱이 iOS 주소록에 의존 하는 경우이 정보를 Siri에 이미 사용할 수 있으므로 앱에서 어떤 조치도 취할 필요가 없습니다. 앱에 고유한 연락처 데이터베이스가 있는 경우에만 연락처 이름을 제공 해야 합니다.

어휘를 설계할 때 사용자가 알고 있는 필요한 값만 제공 합니다. 전화 번호 또는 전자 메일 주소와 같은 정보를 제공 하지 마십시오.

또한 앱은 사용자 특정 어휘가 변경 될 때 Siri를 즉시 업데이트 해야 합니다. 사용자는 Siri의 정보를 iOS 장치에 추가 하 여 요청 하는 데 익숙할 것입니다. 예를 들어 사용자가 앱에 새 연락처를 추가 하는 경우 사용자가 해당 정보를 저장 하는 즉시 Siri에 해당 정보를 보냅니다.

더 중요 한 점은 사용자가 정보를 삭제 했지만 Siri에서 나중에 시간 또는 일을 계속 해 서 인식 하는 경우 사용자가 upset 될 수 있으므로 응용 프로그램은 Siri 어휘의 정보를 즉시 삭제 _해야_ 한다는 것입니다.

> [!IMPORTANT]
> 앱은 사용자가 앱을 다시 설정 하도록 선택 하거나 로그 아웃 하는 경우 Siri에서 사용자 관련 어휘를 모두 제거 해야 합니다.

## <a name="sirikit-permissions"></a>SiriKit 권한

SiriKit의 최종 조각은 권한 중심에 있습니다. IOS의 다른 기능 (예: 사진, 카메라 또는 연락처)을 사용 하는 것과 마찬가지로 사용자는 앱이 Siri와 통신할 수 있는 명시적 권한을 부여 해야 합니다.

앱은 Siri에 제공 되는 정보를 정의 하는 문자열을 제공 하 고 사용자가이 액세스 권한을 부여 해야 하는 이유를 설명 하는 이유를 제공할 수 있습니다.

Apple은 사용자가 iOS 10으로 업그레이드 한 후 사용자가 앱을 처음으로 열 때 Siri를 사용할 수 있도록 앱에서 사용자의 권한을 요청 해야 한다고 제안 합니다. 이는 사용자가 Siri 통합에 대해 알 수 있도록 하 고 첫 번째 요청을 하기 전에 미리 승인 된 사용을 허용 합니다.

## <a name="sirikit-and-maps"></a>SiriKit 및 Maps

SiriKit는 iOS의 필수적인 부분이 며 iOS 10에 추가 된 더 큰 의도 프레임 워크를 사용 합니다. 인 텐트 프레임 워크는 공통 및 공유 작업과 의도를 시스템의 다른 부분과 공유 하도록 디자인 되었습니다.

의도 프레임 워크는 Siri 통합 뿐만 아니라 앱이 특정 연락처에 대 한 기본 전화 통신 또는 메시징 앱이 될 수 있는 연락처 통합과 같은 기타 기능을 제공 합니다. 또한 사용자는 최상의 VOIP 환경을 사용자에 게 제공 하기 위해 CallKit와 긴밀 하 게 통합 됩니다.

IOS 10의 Maps 앱에는 사용자가 지도 UI 내에서 직접 타는 곳을 볼 수 있는 사용자 공유와 같은 기능이 추가 되었습니다. SiriKit는 지도를 사용 하 여 공통 확장 지점을 제공 하므로 Siri와 지도 간에 다른 의도를 공유할 수 있습니다.

즉, 앱에서 SiriKit 확장을 채택한 경우 지도 통합도 무료로 제공 됩니다.

## <a name="designing-a-great-siri-experience"></a>훌륭한 Siri 환경 디자인

앱을 Siri에 통합할 때 뛰어난 사용자 환경을 디자인 하는 것은 훌륭한 앱 사용자 인터페이스를 디자인 하는 것과 다릅니다. 사용자가 화면에서 직접 앱과 상호 작용 하는 일반적인 상황과 달리 Siri를 사용 하는 경우 시각적 인터페이스가 전혀 표시 되지 않는 경우가 많습니다. 예를 들어 사용자가 *"안녕하세요 Siri"* 로 대화를 시작 했을 때입니다.

### <a name="how-siri-helps-the-developer"></a>Siri가 개발자에 게 도움이 되는 방식

Siri와 앱의 상호 작용을 디자인할 때 앱은 *대화형 인터페이스*를 빌드합니다. 즉,이 컨텍스트는 siri가 앱을 대신 하 여 사용자에 게가지고 있는 대화에서 파생 됩니다.

시각적 참조가 없으면 사용자는 자신의 머리에 표시 되는 정보를 추적 해야 합니다. 이로 인해 Siri는 사용자가 수행 하려는 작업을 수행 하는 데 필요한 완전 한 최소 정보를 제공 합니다.

대화 중에는 사용자와 Siri의 질문과 응답이 대화형 인터페이스에 의해 지정 됩니다. 따라서이 인터페이스를 디자인할 때 Siri가 질문 하 고 응답 하는 방식을 고려해 야 합니다.

메시지를 만드는 사용자의 다음 예를 사용 하 여 Siri는 *"보낼 준비가 되셨습니까?" 라는*질문에 응답할 수 있습니다. 사용자는 *"보내기"* , *"취소"* 또는이 질문에 전혀 관련이 없는 것과 같은 다양 한 방법으로 응답할 수 있습니다. 대화가 어떻게 진행 되는지에 관계 없이 Siri는 앱에 대해이를 처리 하 고 사용할 수 있게 되는 관련 정보만 보냅니다.

사용자가 Siri를 사용 하 여 대화를 시작할 수 있는 여러 가지 방법이 있습니다.

- 장치를 선택 하 고 홈 단추를 누릅니다. 이러한 상황에서 Siri는 더 많은 시각적 인터페이스와 더 작은 구두 응답을 제공 합니다.
- *"안녕하세요 Siri"* 를 이야기 하 고 직접 무료 대화를 시작 합니다. 이러한 상황에서 Siri는 시각적 개체와 추가 정보를 줄일 수 있습니다.
- Bluetooth 사용 청각과 같은 내게 필요한 옵션 기능을 사용 하면 특별 한 요구 사항이 있는 사용자에 게 UI를 조정할 수 있습니다.
- 사용자가 최소한의 주의를 최소화 하 여 추진에 집중 하는 데 필요한 자동차 재생을 사용 합니다.

### <a name="how-the-developer-helps-siri"></a>개발자가 Siri를 어떻게 지원 합니까?

Siri와 앱을 통합 하는 경우 개발자는 이러한 통합을 자주 테스트 하 고 가능한 한 다양 한 방법으로 동일한 정보 또는 작업을 요청 하 여 다양 한 요청을 수행 해야 합니다.

두 사람이 동일 하다 고 생각 하는 것이 아니므로 개발자는 Siri 통합을 미세 조정 하는 데 도움이 되는 최대한 다양 한 베타 테스터를 가져오는 것이 중요 합니다. 사용자는 개발자가를 방해 하지 않는 방식으로 정보를 요청 하거나 요청을 할 수 있으며, 이러한 미세 조정을 통해 가장 광범위 한 사용자 그룹이 Siri를 사용 하 여 앱을 사용 하 여 뛰어난 경험을 제공할 수 있습니다.

다른 상황 및 환경에서 테스트 합니다. 이러한 대화가 액량 및 자연스럽 게 유지 되도록 하기 위해 가능한 모든 방법으로 Siri를 사용 하 여 대화를 시작 합니다. 복잡 한 체육관 같이 사용자가 앱을 사용 하 고 있을 가능성이 높은 위치에서 테스트 합니다.

앱에서 Siri가 사용자에 게 요청 및 결과를 올바르게 표시 하는 데 필요한 모든 정보를 제공 하는지 확인 합니다. 이는 특별 한 상황에서 Siri를 사용할 때 특히 그렇습니다.

### <a name="siri-design-guidelines"></a>Siri 디자인 지침

Siri에는 앱을 대신 하 여 사용자와 대화가 있음을 항상 명심 해야 합니다. 개발자는이 대화를 가능한 한 자연스럽 고 자연스럽 게 유지 하려고 합니다.

모든 중요 한 대화와 마찬가지로 개발자는 다음을 확인 해야 합니다.

- 앱이 대화를 위해 준비 된 것입니다.
- 앱은 사용자가 수행 하려는 작업을 정확 하 게 수신 대기 합니다.
- 적절 한 시간에 적절 한 질문을 하는 앱을 요청 합니다.
- 앱은 사용자가 검색 하는 정보를 사용 하 여 요청에 응답 합니다.

#### <a name="preparing-for-the-conversation"></a>대화 준비

가장 먼저 기억해 야 할 사항은 앱의 사용자가 개발자와 정확히 일치 하지 않는 것입니다. 다른 배경에서 제공 되거나, 다른 언어를 사용 하거나, 앱을 사용할 때 특별 한 요구 사항이 있을 수 있습니다.

또한 개발자가 응용 프로그램을 디자인 하 고 빌드한 후에는 앱과 내부 기능 및 일반적인 사용자에 게 포함 되지 않는 기능에 대 한 깊은 지식이 있습니다. 따라서 개발자는 일반 사용자와 다르게 Siri 요청을 요청할 수 있습니다.

이것은 가능한 한 많은 사람들이 Siri를 통해 앱과 상호 작용할 수 있도록 하는 것이 중요 한 이유입니다. 개발자가 고려 하지 않은 방식으로 또는 개발자가 생각 하지 않는 Siri를 통해 앱을 요청할 수 있습니다.

#### <a name="ensure-the-app-is-a-good-listener"></a>앱이 양호한 수신기 인지 확인

개발자는 앱이 양호한 수신기 인지 확인 하 고 사용자의 기대를 충족 하는 대화의 세부 정보를 얻는 데 필요 합니다. 그러나 앱에서 요청 된 작업을 수행 하는 데 필요한 모든 정보를 제공 하지 않을 수도 있습니다.

앱에서 이러한 상황을 처리할 수 있는 몇 가지 방법이 있습니다.

- **누락 값에 대 한 기본 기본값 선택** -예를 들어, 사용자가 선택 하려는 위치를 지정 하지 않은 경우 사용자의 현재 위치에 대 한 사용자의 현재 위치에 대 한 사용자의 현재 위치에 대 한 기본 설정입니다.
- 사용자에 대해 앱이 수집한 특정 정보를 사용 하 여 **추측** 하기-앱에서 사용자의 연락처 정보를 통해 누락 된 휴대폰 번호를 입력 하는 것과 같이 누락 된 정보에 대 한 추측을 수행할 수 있습니다. 그러나 가장 저렴 한 옵션을 선택 하는 등의 잘못 된 문제를 방지 하기 위해 주의를 기울여야 합니다.
- **추가 정보 확인** -앱은 사용자에 게 누락 된 값에 대 한 메시지를 표시할 수 있습니다. 그러나 여기서 키는 대화를 간단 하 고 지점으로 유지 합니다. 사용자가 요청을 얻기 위해 몇 가지 질문에 답해야 하는 경우에는 신속 하 게 불편 해질 것입니다.
- **성능과를 정상적으로 처리** -사용자가 앱이 예상 하지 않거나 지정 된 컨텍스트에서 처리할 수 없는 값을 제공할 수 있습니다. 앱이 이러한 상황을 명확 하 고 쉽게 해결할 수 있도록 사용자에 게이 상황을 연결 하는지 확인 합니다.

앱에 해당 하는 단일 값이 표시 되 면이를 처리 하는 기본 방법은 Siri에서 사용자에 게 확인을 요청 하는 것입니다. 예를 들어 *"Bobo?"* 라는 간단한 예를 사용 하 여 회신할 수 있습니다.

단일 값에 대해 몇 가지 가능한 선택 항목이 올바른 경우에는 명확성을 기본 처리 방법으로 사용할 수 있습니다. 이러한 상황에서 Siri는 선택할 수 있는 최대 10 개의 옵션을 사용자에 게 표시할 수 있습니다. 예를 들어:

```csharp
Who do you want to send the message to?

* Bobo the Great!
* Bobo Jr.
* Little Bobo
```

그래도 문제가 있는 경우 Siri에 게 지정 된 값에 대해 완전히 새로운 특정 대답을 제공 하 라는 메시지를 표시 합니다.

#### <a name="request-final-confirmation"></a>최종 요청 확인

앱이 실제로 사용자 요청을 처리 하기 위해 작업을 수행 하기 전에 Siri는 앱 확장을 확인 하 여 모든 것이 준비 되었는지 확인 합니다. 예를 들어 사용자가 계정에 충분 한 비용을 지불 하 여 요청 된 결제를 수행할 수 있나요?

또한 앱은 Siri에 가능한 모든 정보를 제공 하 여 사용자에 게 제공할 수 있도록 하 고 수행할 작업이 예상과 일치 하는지 확인할 수 있도록 해야 합니다.

사용자가 요청을 확인 하 고 앱에서 해당 요청을 수행한 후에는 앱에서 Siri에 모든 결과를 다시 제공 하 여 사용자에 게 연결할 수 있게 해야 합니다.

#### <a name="responding-to-the-request"></a>요청에 응답

Siri에는 알려진 각 도메인 및 작업에 대 한 몇 가지 기본 제공 사용자 인터페이스가 있습니다. 그러나 적절 한 경우 앱은 응용 프로그램의 브랜딩 및 UI를 제공 하 여 사용자 환경을 보강 하 고 요청에 포함 된 것 보다 많은 정보를 제공 하는 사용자 지정 의도 UI 확장을 제공할 수 있습니다.

즉, Siri에 대 한 사용자 지정 인터페이스를 설계할 때에는 지지대를 사용 해야 합니다. 일반적으로 사용자는 최대한 빨리 특정 작업을 수행 하려고 하며 불필요 한 정보를 사용 하 여 오버 로드 하지 않으려고 합니다.

또한 사용자 지정 UI가 사용자가 보유 하거나 장치를 사용 하 고 있거나 장치를 사용 중일 수 있는 다른 모든 iOS 장치 및 방향에서 올바르게 표시 되 고 올바르게 응답 하도록 주의 해야 합니다.

해당 하는 경우 SiriKit API를 사용 하 여 기본 Siri UI에 이미 있는 중복 정보를 숨깁니다. 그러나 앱이 계속 해 서 Siri에 정보를 제공 하 고 있으므로 구두로 수 있습니다.

Siri가 사용자의 요청을 처리 하기 위해 앱을 시작 하는 경우가 있을 수 있습니다. 예를 들어 사용자가 요청한 사진을 프레젠테이션할 수 있습니다. 이러한 상황에서는 사용자가 필요 하지 않습니다. 중간 단계 또는 추가 상호 작용 없이 필요한 정보를 표시 합니다. 정보를 표시 하거나 사용자가 기대 하지 않는 작업을 수행 하지 않습니다.

### <a name="polishing-the-design"></a>디자인 개선

Apple에서 대화형 인터페이스의 디자인을 폴란드어로 제안 하는 몇 가지 단계가 있습니다. 첫 번째는 Siri에 clear, 간결한 어휘 및 사용 사례 예제를 제공 하는 것입니다.

사용자가 앱을 검색 하는 방법 중 하나는 Siri를 사용 하 여 대화를 시작 하 고 *"수행할 수 있는* 작업"을 요청 하는 것입니다. Siri는 개발자 앱을 비롯 하 여 수행할 수 있는 여러 가지 작업을 보여 주고, 해당 `plist` 파일을 통해 제공 된 예제 주인공 사용 사례를 보여 줍니다.

좋은 예제 사용 사례를 작성 하는 방법:

- 예제가 앱 이름을 포함 하는지 확인 합니다.
- 예제를 짧고 지점으로 유지 합니다.
- 앱에서 지 원하는 각 의도에 대해 여러 예제를 제공 합니다.
- 앱에 대 한 가장 일반적인 사용 사례를 기반으로 하는 의도와 예제에 대 한 우선 순위를 지정 합니다.
- 앱에서 지역화 된 예제를 제공 하는지 확인 합니다.
- 지정 된 각 예제가 앱 내에서 예상 대로 작동 하는지 확인 합니다.
- 예에서는 Siri 주소를 지정 하지 않으므로 *"안녕하세요 Siri ..."* 와 같은 텍스트는 포함 하지 마세요.
- *"* 귀하" 또는 *"감사*합니다."와 같은 불필요 한 pleasantries을 방지 합니다.

적절 한 시간을 사용 하 여 앱이 사용자와 함께 Siri가 있는 대화를 대신 하는 방법을 탐색 하 고 시험해 볼 수 있습니다. 프로세스 전체에서 일반적인 사용자와 의견을 교환할 수 있습니다. 앱의 상호 작용이 시간이 지남에 따라 변경 될 수 있기 때문입니다.

Siri를 사용 하 여 대화를 호출 하는 다른 모든 방법 및 다양 한 상황에서 앱을 테스트 해야 합니다. 실제 위치에서 테스트 사용자는 사무실 및 책상에서 벗어나 앱을 사용할 수 있습니다.

Siri를 사용 하 여 대화 (앱 대신)를 사용 하도록 하는 것은 유체, 자연스럽 고 "느낌이 필요 합니다."입니다.

## <a name="summary"></a>요약

이 문서에서는 SiriKit를 사용 하는 데 필요한 핵심 개념을 설명 했으며, Xamarin.ios 앱과 상호 작용 하 여 iOS 장치에서 Siri 및 Maps 앱을 사용 하는 사용자에 게 액세스할 수 있는 서비스를 제공할 수 있습니다.




## <a name="related-links"></a>관련 링크

- [ElizaChat 샘플](https://docs.microsoft.com/samples/xamarin/ios-samples/ios10-elizachat)
- [SiriKit 프로그래밍 가이드](https://developer.apple.com/library/prerelease/content/documentation/Intents/Conceptual/SiriIntegrationGuide/index.html)
- [의도 프레임 워크 참조](https://developer.apple.com/reference/intents)
- [의도 UI 프레임 워크 참조](https://developer.apple.com/reference/intentsui)
